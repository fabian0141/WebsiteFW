name: Publish Website
on:
  push:
    branches: main

jobs:
  Build:
    runs-on: self-hosted

    steps:
     - uses: actions/checkout@v4
     - name: Setup Go 1.23.5
       uses: actions/setup-go@v5
       with:
         go-version: '1.23.5'

     - name: Install dependencies
       run: go get .

     - name: Build
       run: go build -v ./...

     - name: Test with the Go CLI
       run: go main

  Deploy:
    needs: Build
    runs-on: self-hosted
    steps:
      - name: Download a Build Artifact
        uses: actions/download-artifact@v4
        with:
          name: build folder
          path: /home/Websites
